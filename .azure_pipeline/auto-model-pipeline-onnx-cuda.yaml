# DO NOT EDIT THIS FILE DIRECTLY

# This file is generated by running the following command.

# python generate_pipeline_config.py

# To make changes to this pipeline, please edit generate_pipeline_config.py, regenerate this file and check it in.

stages:
- stage: PerformanceTestForInternalROCM60Ubuntu2004PY39_TORCH211
  displayName: ROCM60 TORCH211 Ubuntu2004 PY39 Internal Performance Test
  dependsOn: []
  jobs:
  - template: /.azure_pipelines/job_templates/build-performance-template.yml
    parameters:
      name: ROCM60Torch211Internal
      pool: $(BUILD_POOL_LIN_GPU_ROCM)
      customMatrixes:
        ROCM60_PY39:
          TORCH_NIGHTLY_OVERRIDE: 'false'
          DISTRIBUTED_BACKEND: rccl
          OS_TYPE: ubuntu2004
          GPU_TYPE: rocm60
          _RUN_TESTS: $(RUN_TESTS)
          DESIRED_PYTHON: '3.9'
          INTERNAL_OR_PUBLIC: internal
          PYTORCH_VERSION: 2.1.1
          PYTORCH_TYPE: stable
          BIWEEKLY_IMAGE: BIWEEKLY_IMAGE_ROCM60Torch211Internal
          USE_NCCL: 'False'

- stage: PerformanceTestForInternalROCM61Ubuntu2004PY39_TORCH212
  displayName: ROCM61 TORCH212 Ubuntu2004 PY39 Internal Performance Test
  dependsOn: []
  jobs:
  - template: /.azure_pipelines/job_templates/build-performance-template.yml
    parameters:
      name: ROCM61Torch212Internal
      pool: $(BUILD_POOL_LIN_GPU_ROCM)
      customMatrixes:
        ROCM61_PY39:
          TORCH_NIGHTLY_OVERRIDE: 'false'
          DISTRIBUTED_BACKEND: rccl
          OS_TYPE: ubuntu2004
          GPU_TYPE: rocm61
          _RUN_TESTS: $(RUN_TESTS)
          DESIRED_PYTHON: '3.9'
          INTERNAL_OR_PUBLIC: internal
          PYTORCH_VERSION: 2.1.2
          PYTORCH_TYPE: stable
          BIWEEKLY_IMAGE: BIWEEKLY_IMAGE_ROCM61Torch212Internal
          USE_NCCL: 'False'

- stage: PerformanceTestForInternalROCM62Ubuntu2004PY39_TORCH221
  displayName: ROCM62 TORCH221 Ubuntu2004 PY39 Internal Performance Test
  dependsOn: []
  jobs:
  - template: /.azure_pipelines/job_templates/build-performance-template.yml
    parameters:
      name: ROCM62Torch221Internal
      pool: $(BUILD_POOL_LIN_GPU_ROCM)
      customMatrixes:
        ROCM62_PY39:
          TORCH_NIGHTLY_OVERRIDE: 'false'
          DISTRIBUTED_BACKEND: rccl
          OS_TYPE: ubuntu2004
          GPU_TYPE: rocm62
          _RUN_TESTS: $(RUN_TESTS)
          DESIRED_PYTHON: '3.9'
          INTERNAL_OR_PUBLIC: internal
          PYTORCH_VERSION: 2.2.1
          PYTORCH_TYPE: stable
          BIWEEKLY_IMAGE: BIWEEKLY_IMAGE_ROCM62Torch221Internal
          USE_NCCL: 'False'

- stage: PerformanceTestForPublicCU118Ubuntu2004PY310_TORCH222
  displayName: CU118 TORCH222 Ubuntu2004 PY310 Public Performance Test
  dependsOn: []
  jobs:
  - template: /.azure_pipelines/job_templates/build-performance-template.yml
    parameters:
      name: CU118Torch222Public
      pool: $(BUILD_POOL_GPU_EUS_CU11x)
      customMatrixes:
        CU118_PY310:
          TORCH_NIGHTLY_OVERRIDE: 'false'
          DISTRIBUTED_BACKEND: sccl
          OS_TYPE: ubuntu2004
          GPU_TYPE: cu118
          _RUN_TESTS: $(RUN_TESTS)
          DESIRED_PYTHON: '3.10'
          INTERNAL_OR_PUBLIC: public
          PYTORCH_VERSION: 2.2.2
          PYTORCH_TYPE: stable
          BIWEEKLY_IMAGE: BIWEEKLY_IMAGE_CU118Torch222Public
          USE_NCCL: 'False'

- stage: PerformanceTestForPublicCU118Ubuntu2204PY310_TORCH222
  displayName: CU118 TORCH222 Ubuntu2204 PY310 Public Performance Test
  dependsOn: []
  jobs:
  - template: /.azure_pipelines/job_templates/build-performance-template.yml
    parameters:
      name: CU118Torch222Public
      pool: $(BUILD_POOL_GPU_EUS_CU11x)
      customMatrixes:
        CU118_PY310:
          TORCH_NIGHTLY_OVERRIDE: 'false'
          DISTRIBUTED_BACKEND: sccl
          OS_TYPE: ubuntu2204
          GPU_TYPE: cu118
          _RUN_TESTS: $(RUN_TESTS)
          DESIRED_PYTHON: '3.10'
          INTERNAL_OR_PUBLIC: public
          PYTORCH_VERSION: 2.2.2
          PYTORCH_TYPE: stable
          BIWEEKLY_IMAGE: BIWEEKLY_IMAGE_CU118Torch222Public
          USE_NCCL: 'False'

- stage: PerformanceTestForPublicCU121Ubuntu2004PY310_TORCH222
  displayName: CU121 TORCH222 Ubuntu2004 PY310 Public Performance Test
  dependsOn: []
  jobs:
  - template: /.azure_pipelines/job_templates/build-performance-template.yml
    parameters:
      name: CU121Torch222Public
      pool: $(BUILD_POOL_GPU_EUS_CU11x)
      customMatrixes:
        CU121_PY310:
          TORCH_NIGHTLY_OVERRIDE: 'false'
          DISTRIBUTED_BACKEND: sccl
          OS_TYPE: ubuntu2004
          GPU_TYPE: cu121
          _RUN_TESTS: $(RUN_TESTS)
          DESIRED_PYTHON: '3.10'
          INTERNAL_OR_PUBLIC: public
          PYTORCH_VERSION: 2.2.2
          PYTORCH_TYPE: stable
          BIWEEKLY_IMAGE: BIWEEKLY_IMAGE_CU121Torch222Public
          USE_NCCL: 'False'

- stage: PerformanceTestForPublicCU118Ubuntu2004PY310_TORCH231
  displayName: CU118 TORCH231 Ubuntu2004 PY310 Public Performance Test
  dependsOn: []
  jobs:
  - template: /.azure_pipelines/job_templates/build-performance-template.yml
    parameters:
      name: CU118Torch231Public
      pool: $(BUILD_POOL_GPU_EUS_CU11x)
      customMatrixes:
        CU118_PY310:
          TORCH_NIGHTLY_OVERRIDE: 'false'
          DISTRIBUTED_BACKEND: sccl
          OS_TYPE: ubuntu2004
          GPU_TYPE: cu118
          _RUN_TESTS: $(RUN_TESTS)
          DESIRED_PYTHON: '3.10'
          INTERNAL_OR_PUBLIC: public
          PYTORCH_VERSION: 2.3.1
          PYTORCH_TYPE: stable
          BIWEEKLY_IMAGE: BIWEEKLY_IMAGE_CU118Torch231Public
          USE_NCCL: 'False'

- stage: PerformanceTestForPublicCU121Ubuntu2204PY310_TORCH231
  displayName: CU121 TORCH231 Ubuntu2204 PY310 Public Performance Test
  dependsOn: []
  jobs:
  - template: /.azure_pipelines/job_templates/build-performance-template.yml
    parameters:
      name: CU121Torch231Public
      pool: $(BUILD_POOL_GPU_EUS_CU11x)
      customMatrixes:
        CU121_PY310:
          TORCH_NIGHTLY_OVERRIDE: 'false'
          DISTRIBUTED_BACKEND: sccl
          OS_TYPE: ubuntu2204
          GPU_TYPE: cu121
          _RUN_TESTS: $(RUN_TESTS)
          DESIRED_PYTHON: '3.10'
          INTERNAL_OR_PUBLIC: public
          PYTORCH_VERSION: 2.3.1
          PYTORCH_TYPE: stable
          BIWEEKLY_IMAGE: BIWEEKLY_IMAGE_CU121Torch231Public
          USE_NCCL: 'False'

- stage: PerformanceTestForPublicCU121Ubuntu2004PY310_TORCH231
  displayName: CU121 TORCH231 Ubuntu2004 PY310 Public Performance Test
  dependsOn: []
  jobs:
  - template: /.azure_pipelines/job_templates/build-performance-template.yml
    parameters:
      name: CU121Torch231Public
      pool: $(BUILD_POOL_GPU_EUS_CU11x)
      customMatrixes:
        CU121_PY310:
          TORCH_NIGHTLY_OVERRIDE: 'false'
          DISTRIBUTED_BACKEND: sccl
          OS_TYPE: ubuntu2004
          GPU_TYPE: cu121
          _RUN_TESTS: $(RUN_TESTS)
          DESIRED_PYTHON: '3.10'
          INTERNAL_OR_PUBLIC: public
          PYTORCH_VERSION: 2.3.1
          PYTORCH_TYPE: stable
          BIWEEKLY_IMAGE: BIWEEKLY_IMAGE_CU121Torch231Public
          USE_NCCL: 'False'

- stage: PerformanceTestForPublicCU118Ubuntu2004PY310_TORCH241
  displayName: CU118 TORCH241 Ubuntu2004 PY310 Public Performance Test
  dependsOn: []
  jobs:
  - template: /.azure_pipelines/job_templates/build-performance-template.yml
    parameters:
      name: CU118Torch241Public
      pool: $(BUILD_POOL_GPU_EUS_CU11x)
      customMatrixes:
        CU118_PY310:
          TORCH_NIGHTLY_OVERRIDE: 'false'
          DISTRIBUTED_BACKEND: sccl
          OS_TYPE: ubuntu2004
          GPU_TYPE: cu118
          _RUN_TESTS: $(RUN_TESTS)
          DESIRED_PYTHON: '3.10'
          INTERNAL_OR_PUBLIC: public
          PYTORCH_VERSION: 2.4.1
          PYTORCH_TYPE: stable
          BIWEEKLY_IMAGE: BIWEEKLY_IMAGE_CU118Torch241Public
          USE_NCCL: 'False'

- stage: PerformanceTestForPublicCU121Ubuntu2204PY310_TORCH241
  displayName: CU121 TORCH241 Ubuntu2204 PY310 Public Performance Test
  dependsOn: []
  jobs:
  - template: /.azure_pipelines/job_templates/build-performance-template.yml
    parameters:
      name: CU121Torch241Public
      pool: $(BUILD_POOL_GPU_EUS_CU11x)
      customMatrixes:
        CU121_PY310:
          TORCH_NIGHTLY_OVERRIDE: 'false'
          DISTRIBUTED_BACKEND: sccl
          OS_TYPE: ubuntu2204
          GPU_TYPE: cu121
          _RUN_TESTS: $(RUN_TESTS)
          DESIRED_PYTHON: '3.10'
          INTERNAL_OR_PUBLIC: public
          PYTORCH_VERSION: 2.4.1
          PYTORCH_TYPE: stable
          BIWEEKLY_IMAGE: BIWEEKLY_IMAGE_CU121Torch241Public
          USE_NCCL: 'False'

- stage: PerformanceTestForPublicCU121Ubuntu2004PY310_TORCH241
  displayName: CU121 TORCH241 Ubuntu2004 PY310 Public Performance Test
  dependsOn: []
  jobs:
  - template: /.azure_pipelines/job_templates/build-performance-template.yml
    parameters:
      name: CU121Torch241Public
      pool: $(BUILD_POOL_GPU_EUS_CU11x)
      customMatrixes:
        CU121_PY310:
          TORCH_NIGHTLY_OVERRIDE: 'false'
          DISTRIBUTED_BACKEND: sccl
          OS_TYPE: ubuntu2004
          GPU_TYPE: cu121
          _RUN_TESTS: $(RUN_TESTS)
          DESIRED_PYTHON: '3.10'
          INTERNAL_OR_PUBLIC: public
          PYTORCH_VERSION: 2.4.1
          PYTORCH_TYPE: stable
          BIWEEKLY_IMAGE: BIWEEKLY_IMAGE_CU121Torch241Public
          USE_NCCL: 'False'

- stage: PerformanceTestForPublicCU124Ubuntu2204PY310_TORCH241
  displayName: CU124 TORCH241 Ubuntu2204 PY310 Public Performance Test
  dependsOn: []
  jobs:
  - template: /.azure_pipelines/job_templates/build-performance-template.yml
    parameters:
      name: CU124Torch241Public
      pool: $(BUILD_POOL_GPU_EUS_CU11x)
      customMatrixes:
        CU124_PY310:
          TORCH_NIGHTLY_OVERRIDE: 'false'
          DISTRIBUTED_BACKEND: sccl
          OS_TYPE: ubuntu2204
          GPU_TYPE: cu124
          _RUN_TESTS: $(RUN_TESTS)
          DESIRED_PYTHON: '3.10'
          INTERNAL_OR_PUBLIC: public
          PYTORCH_VERSION: 2.4.1
          PYTORCH_TYPE: stable
          BIWEEKLY_IMAGE: BIWEEKLY_IMAGE_CU124Torch241Public
          USE_NCCL: 'False'

- stage: PerformanceTestForPublicCU124Ubuntu2004PY310_TORCH241
  displayName: CU124 TORCH241 Ubuntu2004 PY310 Public Performance Test
  dependsOn: []
  jobs:
  - template: /.azure_pipelines/job_templates/build-performance-template.yml
    parameters:
      name: CU124Torch241Public
      pool: $(BUILD_POOL_GPU_EUS_CU11x)
      customMatrixes:
        CU124_PY310:
          TORCH_NIGHTLY_OVERRIDE: 'false'
          DISTRIBUTED_BACKEND: sccl
          OS_TYPE: ubuntu2004
          GPU_TYPE: cu124
          _RUN_TESTS: $(RUN_TESTS)
          DESIRED_PYTHON: '3.10'
          INTERNAL_OR_PUBLIC: public
          PYTORCH_VERSION: 2.4.1
          PYTORCH_TYPE: stable
          BIWEEKLY_IMAGE: BIWEEKLY_IMAGE_CU124Torch241Public
          USE_NCCL: 'False'

- stage: PerformanceTestForPublicCU118Ubuntu2204PY310_TORCH251
  displayName: CU118 TORCH251 Ubuntu2204 PY310 Public Performance Test
  dependsOn: []
  jobs:
  - template: /.azure_pipelines/job_templates/build-performance-template.yml
    parameters:
      name: CU118Torch251Public
      pool: $(BUILD_POOL_GPU_EUS_CU11x)
      customMatrixes:
        CU118_PY310:
          TORCH_NIGHTLY_OVERRIDE: 'false'
          DISTRIBUTED_BACKEND: sccl
          OS_TYPE: ubuntu2204
          GPU_TYPE: cu118
          _RUN_TESTS: $(RUN_TESTS)
          DESIRED_PYTHON: '3.10'
          INTERNAL_OR_PUBLIC: public
          PYTORCH_VERSION: 2.5.1
          PYTORCH_TYPE: stable
          BIWEEKLY_IMAGE: BIWEEKLY_IMAGE_CU118Torch251Public
          USE_NCCL: 'False'

- stage: PerformanceTestForPublicCU121Ubuntu2204PY310_TORCH251
  displayName: CU121 TORCH251 Ubuntu2204 PY310 Public Performance Test
  dependsOn: []
  jobs:
  - template: /.azure_pipelines/job_templates/build-performance-template.yml
    parameters:
      name: CU121Torch251Public
      pool: $(BUILD_POOL_GPU_EUS_CU11x)
      customMatrixes:
        CU121_PY310:
          TORCH_NIGHTLY_OVERRIDE: 'false'
          DISTRIBUTED_BACKEND: sccl
          OS_TYPE: ubuntu2204
          GPU_TYPE: cu121
          _RUN_TESTS: $(RUN_TESTS)
          DESIRED_PYTHON: '3.10'
          INTERNAL_OR_PUBLIC: public
          PYTORCH_VERSION: 2.5.1
          PYTORCH_TYPE: stable
          BIWEEKLY_IMAGE: BIWEEKLY_IMAGE_CU121Torch251Public
          USE_NCCL: 'False'

- stage: PerformanceTestForPublicCU124Ubuntu2204PY310_TORCH251
  displayName: CU124 TORCH251 Ubuntu2204 PY310 Public Performance Test
  dependsOn: []
  jobs:
  - template: /.azure_pipelines/job_templates/build-performance-template.yml
    parameters:
      name: CU124Torch251Public
      pool: $(BUILD_POOL_GPU_EUS_CU11x)
      customMatrixes:
        CU124_PY310:
          TORCH_NIGHTLY_OVERRIDE: 'false'
          DISTRIBUTED_BACKEND: sccl
          OS_TYPE: ubuntu2204
          GPU_TYPE: cu124
          _RUN_TESTS: $(RUN_TESTS)
          DESIRED_PYTHON: '3.10'
          INTERNAL_OR_PUBLIC: public
          PYTORCH_VERSION: 2.5.1
          PYTORCH_TYPE: stable
          BIWEEKLY_IMAGE: BIWEEKLY_IMAGE_CU124Torch251Public
          USE_NCCL: 'False'

- stage: PerformanceTestForPublicCU121Ubuntu2004PY310_TORCH241_NCCL
  displayName: CU121 TORCH241 Ubuntu2004 PY310 Public NCCL Performance Test
  dependsOn: []
  jobs:
  - template: /.azure_pipelines/job_templates/build-performance-template.yml
    parameters:
      name: CU121Torch241Public
      pool: $(BUILD_POOL_GPU_EUS_CU11x)
      customMatrixes:
        CU121_PY310:
          TORCH_NIGHTLY_OVERRIDE: 'false'
          DISTRIBUTED_BACKEND: nccl
          OS_TYPE: ubuntu2004
          GPU_TYPE: cu121
          _RUN_TESTS: $(RUN_TESTS)
          DESIRED_PYTHON: '3.10'
          INTERNAL_OR_PUBLIC: public
          PYTORCH_VERSION: 2.4.1
          PYTORCH_TYPE: stable
          BIWEEKLY_IMAGE: BIWEEKLY_IMAGE_CU121Torch241Public
          USE_NCCL: 'True'



